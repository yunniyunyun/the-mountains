import{S as _}from"./sweetalert2.all-fda0963d.js";import{l as y}from"./runtime-dom.esm-bundler-ff2db17e.js";import{b7 as w,aw as p,ak as n,m as l,u as m,n as t,aK as o,t as c,F as u,au as g,b2 as k,b4 as L,ao as I,al as P}from"./_plugin-vue_export-helper-21b08155.js";import"./_commonjsHelpers-042e6b4d.js";const{VITE_APP_URL:f,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/the-mountains/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{isLoading:!1,orederID:"",order_id_data:{}}},methods:{getOrder(r){this.isLoading=!0;const i=`${f}/api/${b}/order/${r}`;this.$http.get(i).then(a=>{this.order_id_data=a.data.order,this.order_id_data||(this.isLoading=!1,_.fire({icon:"error",title:"訂單不存在"})),this.isLoading=!1}).catch(a=>{this.isLoading=!1,_.fire({icon:"error",title:a.response})})},payOrder(r){this.isLoading=!0;const i=`${f}/api/${b}/pay/${r}`;this.$http.post(i).then(a=>{this.getOrder(this.order_id_data.id),_.fire({icon:"success",title:"付款成功"}),this.isLoading=!1}).catch(a=>{this.isLoading=!1,_.fire({icon:"error",title:a.response.data.message})})}},mounted(){}},d=r=>(I("data-v-595a760f"),r=r(),P(),r),D=d(()=>t("div",{class:"header"},null,-1)),E={class:"container mb-5 d-flex justify-content-center"},O={class:"text-light",style:{width:"60vw"}},A=d(()=>t("h2",{class:"mt-5 text-light text-center mb-3"},"訂單查詢",-1)),C=d(()=>t("hr",null,null,-1)),T={key:0},j={class:"mb-3"},S={class:"mb-3"},R={key:0,class:"text-success"},U=d(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})],-1)),B={key:1,class:"text-danger",style:{"line-height":"40px"}},z=d(()=>t("h5",null,"訂購人資訊",-1)),M={class:"ms-3 mb-3"},N=d(()=>t("h5",null,"訂單內容: ",-1)),q={class:"table align-middle text-light d-none d-md-block"},F=d(()=>t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量/單位"),t("th")])],-1)),H={class:"row row-cols-1 row-cols-lg-2"},K=["src","alt"],G={class:"col mt-1 mt-lg-0"},J={class:"input-group input-group-sm"},Q={class:"text-end"},W=d(()=>t("small",{class:"text-success"},"小計：",-1)),X=d(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),Y={class:"text-end"},Z={class:"d-md-none"},$={class:"bg-dark text-light w-100"},tt={class:"position-relative"},et=["src","alt"],st={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger text-white fz-16"},ot={class:"d-flex flex-column p-3 justify-content-center"},it={class:"mb-2"},dt={class:"mb-2 text-end"},nt={class:"mt-3 text-end"},lt={class:"d-flex justify-content-center mt-4"},rt={key:1},at={class:"mb-3 d-md-flex justify-content-center align-items-center"},ct=d(()=>t("label",{for:"origin_price",class:"form-label",style:{width:"120px"}},"輸入訂單編號",-1));function _t(r,i,a,ut,s,h){const v=p("loadingVue"),x=p("RouterLink");return n(),l(u,null,[m(v,{active:s.isLoading},null,8,["active"]),D,t("div",E,[t("div",O,[A,C,s.order_id_data.id?(n(),l("div",T,[t("h5",j,"訂單編號: "+o(s.order_id_data.id),1),t("h5",S,[c("訂單狀態: "),s.order_id_data.is_paid?(n(),l("span",R,[U,c(" 已付款 ")])):(n(),l("span",B,[c("未付款 "),t("button",{type:"button",class:"btn btn-primary ms-3",onClick:i[0]||(i[0]=e=>h.payOrder(s.order_id_data.id))},"付款")]))]),z,t("div",M,[t("div",null,"Email: "+o(s.order_id_data.user.email),1),t("div",null,"姓名: "+o(s.order_id_data.user.name),1),t("div",null,"電話: "+o(s.order_id_data.user.tel),1),t("div",null,"地址: "+o(s.order_id_data.user.address),1)]),N,t("table",q,[F,t("tbody",null,[(n(!0),l(u,null,g(s.order_id_data.products,e=>(n(),l("tr",{key:e.id},[t("td",null,[t("div",H,[t("img",{src:e.product.imageUrl,class:"table-image d-none d-sm-inline col pe-0",alt:e.product.title,style:{height:"100px","object-fit":"cover","max-width":"150px"}},null,8,K),t("p",G,o(e.product.title),1)])]),t("td",null,o(e.product.price),1),t("td",null,[t("div",J,[t("p",null,o(e.qty),1)])]),t("td",Q,[W,c(" "+o(e.final_total),1)])]))),128))]),t("tfoot",null,[t("tr",null,[X,t("td",Y,o(s.order_id_data.total),1)])])]),t("div",Z,[(n(!0),l(u,null,g(s.order_id_data.products,e=>(n(),l("div",{class:"d-flex justify-content-center align-items-center mb-3",key:e.id},[t("div",$,[t("div",tt,[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-100",style:{height:"160px","object-fit":"cover"}},null,8,et),t("span",st,o(e.qty),1)]),t("div",ot,[t("h5",it,o(e.product.title),1),t("p",dt,o(e.final_total),1)])])]))),128)),t("h5",nt,"總計: "+o(s.order_id_data.total),1)]),t("div",lt,[t("button",{type:"button",class:"btn btn-outline-secondary me-3",onClick:i[1]||(i[1]=e=>(s.order_id_data={},s.orederID=""))},"再查一筆"),m(x,{to:"/products",class:"btn btn-outline-secondary",href:"#"},{default:k(()=>[c("繼續逛逛")]),_:1})])])):(n(),l("div",rt,[t("div",at,[ct,L(t("input",{id:"origin_price","onUpdate:modelValue":i[2]||(i[2]=e=>s.orederID=e),type:"text",class:"form-control",placeholder:"請輸入訂單編號",style:{"max-width":"280px"}},null,512),[[y,s.orederID]]),t("button",{type:"button",class:"btn btn-outline-secondary ms-md-3 mt-4 mt-md-0",onClick:i[3]||(i[3]=e=>h.getOrder(s.orederID))},"查詢")])]))])])],64)}const ft=w(V,[["render",_t],["__scopeId","data-v-595a760f"]]);export{ft as default};
