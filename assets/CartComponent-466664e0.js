import{c as _}from"./cartStore-0f78d97b.js";import{l as v}from"./loadingStore-abd78020.js";import{m as y,b as C}from"./pinia-e6b04fcb.js";import{k as x}from"./runtime-dom.esm-bundler-ff2db17e.js";import{b7 as k,aw as g,ak as a,m as l,u as c,n as t,F as d,au as h,l as w,aK as r,b2 as m,t as i,b4 as S,ao as V,al as I}from"./_plugin-vue_export-helper-21b08155.js";import"./sweetalert2.all-fda0963d.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-731bab47.js";import"./vue-router-d7550456.js";const q="/the-mountains/assets/cart-empty-title-132fa523.png";const L=_(),B={data(){return{products:[],loadingItem:""}},computed:{...y(_,["cart"]),...y(v,["isLoading"])},methods:{...C(_,["deleteCart","updateCart","getCarts","deleteCarts"])},mounted(){L.getCarts()}},n=s=>(V("data-v-3964abc4"),s=s(),I(),s),$=n(()=>t("div",{class:"header"},null,-1)),A={class:"container mb-5"},N=n(()=>t("div",{class:"d-none d-md-flex justify-content-center text-secondary",style:{"margin-top":"60px"}},[t("div",{class:"position-relative m-4",style:{width:"60%"}},[t("div",{class:"progress",style:{height:"4px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"33%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-right-fill",viewBox:"0 0 16 16"},[t("path",{d:"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"})])]),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc((33% - 5rem)/2)",color:"#1FBA82"}},"1.確認內容"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"33%","pointer-events":"none"}}),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(32% + (33% - 5rem)/2)"}},"2.填寫資料"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"66%","pointer-events":"none"}}),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(65% + (33% - 5rem)/2)"}},"3.訂單完成"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%","pointer-events":"none"}})])],-1)),U=n(()=>t("h2",{class:"mt-5 text-light text-center mb-3"},"購物車內容",-1)),j={class:"text-end"},F={class:"table align-middle text-light"},D=n(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量"),t("th")])],-1)),R=["disabled","onClick"],z=n(()=>t("i",{class:"fas fa-spinner fa-pulse"},null,-1)),E=["src","alt"],K={class:"input-group input-group-sm"},M=["onUpdate:modelValue","disabled","onChange"],T=["value"],G=["value"],H={class:"text-end"},J=n(()=>t("small",{class:"text-success"},"小計：",-1)),O=n(()=>t("td",null,null,-1)),P=n(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),Q={class:"text-end"},W=n(()=>t("td",null,null,-1)),X=n(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),Y={class:"text-end text-success"},Z={class:"d-flex justify-content-end mt-4"},tt=n(()=>t("p",{class:"text-center"},[t("img",{src:q,class:"title-img",alt:"logo"})],-1)),et={class:"d-flex justify-content-center",style:{"margin-top":"-24px"}};function st(s,p,ot,nt,b,at){const f=g("loadingVue"),u=g("RouterLink");return a(),l(d,null,[c(f,{active:s.isLoading,"onUpdate:active":p[0]||(p[0]=e=>s.isLoading=e)},null,8,["active"]),$,t("div",A,[N,Array.isArray(s.cart.carts)&&s.cart.carts.length?(a(),l(d,{key:0},[U,t("div",j,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:p[1]||(p[1]=(...e)=>s.deleteCarts&&s.deleteCarts(...e))},"清空購物車")]),t("table",F,[D,t("tbody",null,[s.cart.carts?(a(!0),l(d,{key:0},h(s.cart.carts,e=>(a(),l("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===b.loadingItem,onClick:o=>s.deleteCart(e)},[z,i(" x ")],8,R)]),t("td",null,[c(u,{to:`/product/${e.product.id}`},{default:m(()=>[t("img",{src:e.product.imageUrl,class:"table-image me-3",alt:e.product.title},null,8,E)]),_:2},1032,["to"]),i(" "+r(e.product.title),1)]),t("td",null,r(e.product.price),1),t("td",null,[t("div",K,[S(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>e.qty=o,disabled:e.id===b.loadingItem,onChange:o=>s.updateCart(e)},[e.qty<=10?(a(),l(d,{key:0},h(10,o=>t("option",{value:o,key:`${o}qty`},r(o),9,T)),64)):(a(!0),l(d,{key:1},h(e.qty,o=>(a(),l("option",{value:o,key:o+"qty"},r(o),9,G))),128))],40,M),[[x,e.qty]])])]),t("td",H,[J,i(" "+r(e.final_total),1)])]))),128)):w("",!0)]),t("tfoot",null,[t("tr",null,[O,P,t("td",Q,r(s.cart.total),1)]),t("tr",null,[W,X,t("td",Y,r(s.cart.final_total),1)])])]),t("div",Z,[c(u,{to:"/products",class:"btn btn-outline-primary me-2"},{default:m(()=>[i("繼續購物")]),_:1}),c(u,{to:"/checkout",class:"btn btn-primary"},{default:m(()=>[i("下一步 | 填寫資料")]),_:1})])],64)):(a(),l(d,{key:1},[tt,t("div",et,[c(u,{to:"/products",class:"btn btn-primary me-2 btn-lg"},{default:m(()=>[i("挑行程")]),_:1})])],64))])],64)}const _t=k(B,[["render",st],["__scopeId","data-v-3964abc4"]]);export{_t as default};
