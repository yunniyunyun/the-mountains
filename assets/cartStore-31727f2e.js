import{g as c,h as d}from"./index-a2b72240.js";import{S as i}from"./sweetalert2.all-c3cf7a65.js";const{VITE_APP_URL:p,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/vue-hw-7/",MODE:"production",DEV:!1,PROD:!0},h=c("productsStore",{state:()=>({products:[],pages:{}}),actions:{getProducts(r=1){console.log("page",r),d.get(`${p}/api/${u}/products/?page=${r}`).then(t=>{this.products=t.data.products,this.pages=t.data.pagination}).catch(t=>{i.fire({icon:"error",title:t.response.data.message})})}},getters:{sortProducts:({products:r})=>r.sort((t,o)=>t.price-o.price)}}),g=c("cart",{state:()=>({cart:[]}),actions:{addToCart(r,t=1){const o=this.cart.find(s=>s.productId===r);o?o.qty+=t:this.cart.push({id:new Date().getTime(),productId:r,qty:t}),i.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"加入購物車"})},setCartQty(r,t){const o=this.cart.find(s=>s.id===r);o.qty=t*1},removeCartItem(r){const t=this.cart.findIndex(o=>o.id===r);this.cart.splice(t,1)}},getters:{cartList:({cart:r})=>{const{products:t}=h(),o=r.map(e=>{const a=t.find(n=>n.id===e.productId);return{...e,product:a,subtotal:a.price*e.qty}}),s=o.reduce((e,a)=>e+a.subtotal,0);return{carts:o,total:s}}}});export{g as c,h as p};
