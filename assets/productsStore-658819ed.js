import{d,a as s}from"./pinia-e6b04fcb.js";import{S as a}from"./sweetalert2.all-fda0963d.js";import{l as g}from"./loadingStore-abd78020.js";const{VITE_APP_URL:c,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/the-mountains/",MODE:"production",DEV:!1,PROD:!0},{loadingTrue:n,loadingFalse:o}=g(),_=d("productsStore",{state:()=>({products:[],pages:{},categories:[],tempCatrgory:"全部行程"}),actions:{getCategories(){s.get(`${c}/api/${i}/products/all`).then(t=>{const e=t.data.products.map(u=>u.category),p=[...new Set(e)];this.categories=["全部行程",...p]}).catch(t=>{a.fire({icon:"error",title:t.response.data.message})})},changeCategory(t){this.tempCatrgory=t},getProducts(t=1){n(),s.get(`${c}/api/${i}/products/?page=${t}`).then(r=>{this.products=r.data.products,this.pages=r.data.pagination,o()}).catch(r=>{a.fire({icon:"error",title:r.response.data.message}),o()})},getAllProducts(){n(),s.get(`${c}/api/${i}/products/all`).then(t=>{this.products=t.data.products,o()}).catch(t=>{a.fire({icon:"error",title:t.response.data.message}),o()})}},getters:{sortProducts:({products:t})=>t.sort((r,e)=>r.price-e.price),homeProducts:({products:t})=>t.filter(r=>(r==null?void 0:r.is_home)===1),hotProducts:({products:t})=>t.filter(r=>(r==null?void 0:r.is_hot)===1),hotHomeProducts:({products:t})=>t.filter(r=>(r==null?void 0:r.is_hot)===1).slice(0,4),latestProducts:({products:t})=>t.sort((r,e)=>r.create_at-e.create_at).slice(0,5),changeProducts:({tempCatrgory:t,products:r})=>t==="全部行程"?r:r.filter(e=>e.category===t)}});export{_ as p};
