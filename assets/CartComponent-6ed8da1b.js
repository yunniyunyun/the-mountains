import{c as h}from"./cartStore-8c6d37e9.js";import{l as x}from"./loadingStore-1b5c1276.js";import{_ as C,m as y,B as k,r as g,o as a,c as d,b as u,a as t,F as c,C as p,g as f,t as n,w as _,E as w,f as r,H as S,J as V,p as I,h as q}from"./index-8b3942b4.js";import"./sweetalert2.all-5604ac1b.js";const B=h(),L={data(){return{products:[],loadingItem:""}},computed:{...y(h,["cart"]),...y(x,["isLoading"])},methods:{...k(h,["deleteCart","updateCart","getCarts"])},mounted(){B.getCarts()}},l=s=>(I("data-v-a978694d"),s=s(),q(),s),$=l(()=>t("div",{class:"header"},null,-1)),N={class:"container mb-5"},U=l(()=>t("div",{class:"d-none d-md-flex justify-content-center text-secondary",style:{"margin-top":"60px"}},[t("div",{class:"position-relative m-4",style:{width:"60%"}},[t("div",{class:"progress",style:{height:"4px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"33%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc((33% - 5rem)/2)",color:"#1FBA82"}},"確認內容"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"33%"}},"2"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(32% + (33% - 5rem)/2)"}},"填寫資料"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"66%"}},"3"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(65% + (33% - 5rem)/2)"}},"訂單完成"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%"}})])],-1)),F=l(()=>t("h2",{class:"mt-5 text-light text-center mb-3"},"購物車內容",-1)),j=l(()=>t("div",{class:"text-end"},null,-1)),A={class:"table align-middle text-light"},D=l(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量"),t("th")])],-1)),E=["disabled","onClick"],R=l(()=>t("i",{class:"fas fa-spinner fa-pulse"},null,-1)),H=["src","alt"],J={class:"input-group input-group-sm"},M=["onUpdate:modelValue","disabled","onChange"],T=["value"],z=["value"],G={class:"text-end"},K=l(()=>t("small",{class:"text-success"},"小計：",-1)),O=l(()=>t("td",null,null,-1)),P=l(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),Q={class:"text-end"},W=l(()=>t("td",null,null,-1)),X=l(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),Y={class:"text-end text-success"},Z={class:"d-flex justify-content-end mt-4"};function tt(s,m,et,st,b,ot){const v=g("loadingVue"),i=g("RouterLink");return a(),d(c,null,[u(v,{active:s.isLoading,"onUpdate:active":m[0]||(m[0]=e=>s.isLoading=e)},null,8,["active"]),$,t("div",N,[U,F,j,t("table",A,[D,t("tbody",null,[s.cart.carts?(a(!0),d(c,{key:0},p(s.cart.carts,e=>(a(),d("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===b.loadingItem,onClick:o=>s.deleteCart(e)},[R,r(" x ")],8,E)]),t("td",null,[u(i,{to:`/product/${e.product.id}`},{default:_(()=>[t("img",{src:e.product.imageUrl,class:"table-image me-3",alt:e.product.title},null,8,H)]),_:2},1032,["to"]),r(" "+n(e.product.title),1)]),t("td",null,n(e.product.price),1),t("td",null,[t("div",J,[S(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>e.qty=o,disabled:e.id===b.loadingItem,onChange:o=>s.updateCart(e)},[e.qty<=10?(a(),d(c,{key:0},p(10,o=>t("option",{value:o,key:`${o}qty`},n(o),9,T)),64)):(a(!0),d(c,{key:1},p(e.qty,o=>(a(),d("option",{value:o,key:o+"qty"},n(o),9,z))),128))],40,M),[[V,e.qty]])])]),t("td",G,[K,r(" "+n(e.final_total),1)])]))),128)):f("",!0)]),t("tfoot",null,[t("tr",null,[O,P,t("td",Q,n(s.cart.total),1)]),t("tr",null,[W,X,t("td",Y,n(s.cart.final_total),1)])])]),t("div",Z,[u(i,{to:"/products",class:"btn btn-outline-primary me-2"},{default:_(()=>[r("繼續購物")]),_:1}),s.cart.carts.length!==0?(a(),w(i,{key:0,to:"/checkout",class:"btn btn-primary"},{default:_(()=>[r("下一步 | 填寫資料")]),_:1})):f("",!0)])])],64)}const rt=C(L,[["render",tt],["__scopeId","data-v-a978694d"]]);export{rt as default};
