import{_ as C,o as c,c as r,a as h,d as t,F as _,f as p,g as b,t as a,h as x,v as f}from"./index-dae80864.js";const{VITE_APP_URL:i,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/vue-hw-6/",MODE:"production",DEV:!1,PROD:!0},m={data(){return{products:[],cart:{},loadingItem:""}},methods:{getCarts(){this.$http.get(`${i}/api/${u}/cart`).then(s=>{this.cart=s.data.data})},updateCart(s){const d={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${i}/api/${u}/cart/${s.id}`,{data:d}).then(g=>{this.getCarts(),this.loadingItem=""})},deleteCart(s){this.loadingItem=s.id,this.$http.delete(`${i}/api/${u}/cart/${s.id}`).then(d=>{this.getCarts(),this.loadingItem=""})},deleteCarts(){this.$http.delete(`${i}/api/${u}/carts`).then(s=>{this.getCarts(),this.loadingItem=""})}},mounted(){this.getCarts()}},v={class:"text-end"},y={class:"table align-middle"},I=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),P=["disabled","onClick"],V=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),$={class:"input-group input-group-sm"},k=["onUpdate:modelValue","disabled","onChange"],E=["value"],A={class:"text-end"},T=t("small",{class:"text-success"},"小計：",-1),w=t("td",null,null,-1),D=t("td",{colspan:"3",class:"text-end"},"總計",-1),U={class:"text-end"},q=t("td",null,null,-1),B=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),L={class:"text-end text-success"};function R(s,d,g,N,n,o){return c(),r(_,null,[h(" 這是購物車 "),t("div",v,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:d[0]||(d[0]=(...e)=>o.deleteCarts&&o.deleteCarts(...e))},"清空購物車")]),t("table",y,[I,t("tbody",null,[n.cart.carts?(c(!0),r(_,{key:0},p(n.cart.carts,e=>(c(),r("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===n.loadingItem,onClick:l=>o.deleteCart(e)},[V,h(" x ")],8,P)]),t("td",null,a(e.product.title)+" ",1),t("td",null,[t("div",$,[x(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>e.qty=l,disabled:e.id===n.loadingItem,onChange:l=>o.updateCart(e)},[(c(),r(_,null,p(10,l=>t("option",{value:l,key:`${l}111`},a(l),9,E)),64))],40,k),[[f,e.qty]])])]),t("td",null,a(e.product.price),1),t("td",A,[T,h(" "+a(e.total),1)])]))),128)):b("",!0)]),t("tfoot",null,[t("tr",null,[w,D,t("td",U,a(n.cart.total),1)]),t("tr",null,[q,B,t("td",L,a(n.cart.final_total),1)])])])],64)}const F=C(m,[["render",R]]);export{F as default};
