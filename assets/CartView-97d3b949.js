import{_ as b,r as f,o as i,c,b as v,a as h,d as t,F as _,f as p,h as x,t as o,i as m,v as V}from"./index-811e4a0b.js";const{VITE_APP_URL:r,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/vue-hw-7/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{isLoading:!1,products:[],cart:{},loadingItem:""}},methods:{getCarts(){this.$http.get(`${r}/api/${u}/cart`).then(s=>{this.isLoading=!1,this.cart=s.data.data})},updateCart(s){const l={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${r}/api/${u}/cart/${s.id}`,{data:l}).then(g=>{this.getCarts(),this.loadingItem=""})},deleteCart(s){this.loadingItem=s.id,this.$http.delete(`${r}/api/${u}/cart/${s.id}`).then(l=>{this.getCarts(),this.loadingItem=""})},deleteCarts(){this.$http.delete(`${r}/api/${u}/carts`).then(s=>{this.getCarts(),this.loadingItem=""})}},mounted(){this.isLoading=!0,this.getCarts()}},I={class:"text-end"},P={class:"table align-middle"},L=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),$=["disabled","onClick"],k=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),E={class:"input-group input-group-sm"},A=["onUpdate:modelValue","disabled","onChange"],T=["value"],U={class:"text-end"},w=t("small",{class:"text-success"},"小計：",-1),D=t("td",null,null,-1),q=t("td",{colspan:"3",class:"text-end"},"總計",-1),B={class:"text-end"},N=t("td",null,null,-1),R=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),S={class:"text-end text-success"};function F(s,l,g,H,n,d){const C=f("loadingVue");return i(),c(_,null,[v(C,{active:n.isLoading,"onUpdate:active":l[0]||(l[0]=e=>n.isLoading=e)},null,8,["active"]),h(" 這是購物車 "),t("div",I,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:l[1]||(l[1]=(...e)=>d.deleteCarts&&d.deleteCarts(...e))},"清空購物車")]),t("table",P,[L,t("tbody",null,[n.cart.carts?(i(!0),c(_,{key:0},p(n.cart.carts,e=>(i(),c("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===n.loadingItem,onClick:a=>d.deleteCart(e)},[k,h(" x ")],8,$)]),t("td",null,o(e.product.title)+" ",1),t("td",null,[t("div",E,[m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":a=>e.qty=a,disabled:e.id===n.loadingItem,onChange:a=>d.updateCart(e)},[(i(),c(_,null,p(10,a=>t("option",{value:a,key:`${a}111`},o(a),9,T)),64))],40,A),[[V,e.qty]])])]),t("td",null,o(e.product.price),1),t("td",U,[w,h(" "+o(e.total),1)])]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[D,q,t("td",B,o(n.cart.total),1)]),t("tr",null,[N,R,t("td",S,o(n.cart.final_total),1)])])])],64)}const O=b(y,[["render",F]]);export{O as default};
