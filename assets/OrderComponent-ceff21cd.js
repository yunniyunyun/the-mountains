import{S as _}from"./sweetalert2.all-fda0963d.js";import{l as x}from"./runtime-dom.esm-bundler-ff2db17e.js";import{b7 as y,aw as h,ak as l,m as a,u as p,n as t,aK as i,t as c,F as m,au as w,b2 as L,b4 as k,ao as I,al as P}from"./_plugin-vue_export-helper-21b08155.js";import"./_commonjsHelpers-042e6b4d.js";const{VITE_APP_URL:f,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/the-mountains/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{isLoading:!1,orederID:"",order_id_data:{}}},methods:{getOrder(d){this.isLoading=!0;const s=`${f}/api/${g}/order/${d}`;this.$http.get(s).then(r=>{this.isLoading=!1,this.order_id_data=r.data.order,this.order_id_data||_.fire({icon:"error",title:"訂單不存在"})}).catch(r=>{this.isLoading=!1,_.fire({icon:"error",title:r.response})})},payOrder(d){this.isLoading=!0;const s=`${f}/api/${g}/pay/${d}`;this.$http.post(s).then(r=>{this.getOrder(this.order_id_data.id),_.fire({icon:"success",title:"付款成功"}),this.isLoading=!1}).catch(r=>{this.isLoading=!1,_.fire({icon:"error",title:r.response.data.message})})}},mounted(){}},n=d=>(I("data-v-3549af57"),d=d(),P(),d),D=n(()=>t("div",{class:"header"},null,-1)),E={class:"container mb-5 d-flex justify-content-center"},O={class:"text-light",style:{width:"60vw"}},A=n(()=>t("h2",{class:"mt-5 text-light text-center mb-3"},"訂單查詢",-1)),C=n(()=>t("hr",null,null,-1)),T={key:0},S={class:"mb-3"},R={class:"mb-3"},U={key:0,class:"text-success"},B=n(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill",viewBox:"0 0 16 16"},[t("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})],-1)),j={key:1,class:"text-danger",style:{"line-height":"40px"}},M=n(()=>t("h5",null,"訂夠人資訊",-1)),N={class:"ms-3 mb-3"},z=n(()=>t("h5",null,"訂單內容: ",-1)),F={class:"table align-middle text-light"},H=n(()=>t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量/單位"),t("th")])],-1)),q=["src","alt"],K={class:"input-group input-group-sm"},G={class:"text-end"},J=n(()=>t("small",{class:"text-success"},"小計：",-1)),Q=n(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),W={class:"text-end"},X={class:"d-flex justify-content-center mt-4"},Y={key:1},Z={class:"mb-3 d-md-flex justify-content-center align-items-center"},$=n(()=>t("label",{for:"origin_price",class:"form-label",style:{width:"120px"}},"輸入訂單編號",-1));function tt(d,s,r,et,e,u){const v=h("loadingVue"),b=h("RouterLink");return l(),a(m,null,[p(v,{active:e.isLoading,"onUpdate:active":s[0]||(s[0]=o=>e.isLoading=o)},null,8,["active"]),D,t("div",E,[t("div",O,[A,C,e.order_id_data.id?(l(),a("div",T,[t("h5",S,"訂單編號: "+i(e.order_id_data.id),1),t("h5",R,[c("訂單狀態: "),e.order_id_data.is_paid?(l(),a("span",U,[B,c(" 已付款 ")])):(l(),a("span",j,[c("未付款 "),t("button",{type:"button",class:"btn btn-primary ms-3",onClick:s[1]||(s[1]=o=>u.payOrder(e.order_id_data.id))},"付款")]))]),M,t("div",N,[t("div",null,"Email: "+i(e.order_id_data.user.email),1),t("div",null,"姓名: "+i(e.order_id_data.user.name),1),t("div",null,"電話: "+i(e.order_id_data.user.tel),1),t("div",null,"地址: "+i(e.order_id_data.user.address),1)]),z,t("table",F,[H,t("tbody",null,[(l(!0),a(m,null,w(e.order_id_data.products,o=>(l(),a("tr",{key:o.id},[t("td",null,[t("img",{src:o.product.imageUrl,class:"table-image me-3 d-none d-sm-inline",alt:o.product.title,style:{height:"100px","object-fit":"cover","max-width":"150px"}},null,8,q),c(" "+i(o.product.title),1)]),t("td",null,i(o.product.price),1),t("td",null,[t("div",K,[t("p",null,i(o.qty),1)])]),t("td",G,[J,c(" "+i(o.final_total),1)])]))),128))]),t("tfoot",null,[t("tr",null,[Q,t("td",W,i(e.order_id_data.total),1)])])]),t("div",X,[t("button",{type:"button",class:"btn btn-outline-secondary me-3",onClick:s[2]||(s[2]=o=>(e.order_id_data={},e.orederID=""))},"再查一筆"),p(b,{to:"/products",class:"btn btn-outline-secondary",href:"#"},{default:L(()=>[c("繼續逛逛")]),_:1})])])):(l(),a("div",Y,[t("div",Z,[$,k(t("input",{id:"origin_price","onUpdate:modelValue":s[3]||(s[3]=o=>e.orederID=o),type:"text",class:"form-control",placeholder:"請輸入訂單編號",style:{"max-width":"280px"}},null,512),[[x,e.orederID]]),t("button",{type:"button",class:"btn btn-outline-secondary ms-md-3 mt-4 mt-md-0",onClick:s[4]||(s[4]=o=>u.getOrder(e.orederID))},"查詢")])]))])])],64)}const dt=y(V,[["render",tt],["__scopeId","data-v-3549af57"]]);export{dt as default};
