import{l as m,c as v}from"./cartStore-709403e6.js";import{p as S}from"./PaginationVue-5eed17c4.js";import{g as k,h as C,_ as $,m as l,A as p,r as a,o as n,c as r,b as i,a as o,F as u,B as w,w as A,t as g,C as L}from"./index-d7f509c9.js";import{S as T}from"./sweetalert2.all-e66135d4.js";const{VITE_APP_URL:V,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/vue-hw-7/",MODE:"production",DEV:!1,PROD:!0},{loadingTrue:E,loadingFalse:_}=m(),c=k("productsStore",{state:()=>({products:[],pages:{}}),actions:{getProducts(t=1){E(),C.get(`${V}/api/${b}/products/?page=${t}`).then(s=>{this.products=s.data.products,this.pages=s.data.pagination,_()}).catch(s=>{T.fire({icon:"error",title:s.response.data.message}),_()})}},getters:{sortProducts:({products:t})=>t.sort((s,d)=>s.price-d.price)}}),y=c(),R={components:{pagination:S},computed:{...l(c,["products","pages"]),...l(m,["isLoading"])},methods:{...p(v,["addToCart"]),...p(c,["getProducts"])},mounted(){y.getProducts()}},B=o("div",{class:"header",style:{"background-image":"url(./src/images/home/products.avif)","background-position":"50% 65%","background-size":"cover",height:"30vh"}},null,-1),U={class:"container"},D=o("div",{class:"mt-5"},null,-1),I={class:"row row-cols-5 my-3 g-4"},x={class:"card"},F=["src"],H={class:"card-body d-flex flex-column"},M={class:"card-title mb-auto"},N={class:"float-end text-end"},O=["onClick"];function z(t,s,d,j,q,G){const h=a("loadingVue"),P=a("RouterLink"),f=a("pagination");return n(),r(u,null,[i(h,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=e=>t.isLoading=e)},null,8,["active"]),B,o("div",U,[D,o("div",I,[(n(!0),r(u,null,w(t.products,e=>(n(),r("div",{class:"col card-group",key:e.id},[o("div",x,[i(P,{to:`/product/${e.id}`},{default:A(()=>[o("img",{src:e.imageUrl,class:"card-img-top",alt:"...",style:{height:"150px"}},null,8,F)]),_:2},1032,["to"]),o("div",H,[o("h6",M,g(e.title),1),o("span",N,"$ "+g(e.price),1),o("a",{href:"#",class:"btn btn-outline-primary w-100 mt-2",onClick:L(J=>t.addToCart(e.id),["prevent"])},"加入購物車",8,O)])])]))),128))]),i(f,{pages:t.pages,"get-products":t.getProducts,onChangePage:t.getProducts},null,8,["pages","get-products","onChangePage"])])],64)}const Y=$(R,[["render",z]]);export{Y as default};
