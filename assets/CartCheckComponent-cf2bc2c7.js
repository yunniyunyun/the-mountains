import{c as _}from"./cartStore-08304235.js";import{l as C}from"./loadingStore-e594063d.js";import{o as g}from"./orderStore-6f49708e.js";import{_ as S,m as p,E as y,r as n,o as u,c as b,b as l,a as e,w as h,F as v,B as E,g as U,t as c,G as m,H as B,I as F,f as x,p as L,h as N}from"./index-1940979a.js";import"./sweetalert2.all-df37e7ec.js";const I=_(),q={data(){return{}},computed:{...p(_,["cart"]),...p(C,["isLoading"]),...p(g,["order"])},methods:{...y(_,["getCarts"]),...y(g,["createOrder"]),isPhone(t){return t?/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼":"電話 為必填"}},mounted(){I.getCarts()}},a=t=>(L("data-v-a23c4b7e"),t=t(),N(),t),$=a(()=>e("div",{class:"header"},null,-1)),j={class:"container mb-5"},A=a(()=>e("div",{class:"d-flex justify-content-center text-secondary",style:{"margin-top":"60px"}},[e("div",{class:"position-relative m-4",style:{width:"60%"}},[e("div",{class:"progress",style:{height:"4px"}},[e("div",{class:"progress-bar",role:"progressbar",style:{width:"66%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),e("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc((33% - 5rem)/2)",color:"#1FBA82"}},"確認內容"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem",left:"33%"}},"2"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(32% + (33% - 5rem)/2)",color:"#1FBA82"}},"填寫資料"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"66%"}},"3"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(65% + (33% - 5rem)/2)"}},"訂單完成"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%"}})])],-1)),O=a(()=>e("h2",{class:"mt-5 text-light text-center mb-4"},"訂單資料",-1)),z={class:"row text-light"},D=a(()=>e("div",{class:"col-1"},null,-1)),P={class:"mb-3 row"},R=a(()=>e("label",{for:"email",class:"form-label col-3"},"Email",-1)),T={class:"mb-3 row"},G=a(()=>e("label",{for:"name",class:"form-label col-3"},"收件人姓名",-1)),H={class:"mb-3 row"},M=a(()=>e("label",{for:"tel",class:"form-label col-3"},"收件人電話",-1)),J={class:"mb-3 row"},K=a(()=>e("label",{for:"address",class:"form-label col-3"},"收件人地址",-1)),Q={class:"mb-3"},W=a(()=>e("label",{for:"message",class:"form-label"},"留言",-1)),X={class:"text-end"},Y={class:"d-flex justify-content-end mt-4"},Z=a(()=>e("div",{class:"col-1"},null,-1)),ee={class:"col-4"},te={class:"table align-middle text-light sticky-top",style:{top:"80px","z-index":"-5"}},se={class:"position-relative",style:{height:"80px",width:"120px"}},oe=["src","alt"],le={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary"},ae={class:"text-end"},re=a(()=>e("td",{colspan:"2",class:"text-end text-success"},"結帳金額",-1)),ne={class:"text-end text-success"};function ie(t,s,de,ce,me,V){const w=n("loadingVue"),i=n("v-field"),d=n("error-message"),f=n("RouterLink"),k=n("VForm");return u(),b(v,null,[l(w,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=o=>t.isLoading=o)},null,8,["active"]),$,e("div",j,[A,O,e("div",z,[D,l(k,{ref:"form",class:"col-md-5",onSubmit:t.createOrder},{default:h(({errors:o})=>[e("div",P,[R,l(i,{id:"email",name:"Email",type:"email",class:m(["form-control col",{"is-invalid":o.Email}]),rules:"email|required",modelValue:t.order.user.email,"onUpdate:modelValue":s[1]||(s[1]=r=>t.order.user.email=r),placeholder:"請輸入 Email",style:{"margin-right":"12px"}},null,8,["modelValue","class"]),l(d,{name:"Email",class:"invalid-feedback"})]),e("div",T,[G,l(i,{id:"name",name:"姓名",type:"text",class:m(["form-control col",{"is-invalid":o.姓名}]),modelValue:t.order.user.name,"onUpdate:modelValue":s[2]||(s[2]=r=>t.order.user.name=r),placeholder:"請輸入姓名",rules:"required",style:{"margin-right":"12px"}},null,8,["class","modelValue"]),l(d,{name:"姓名",class:"invalid-feedback"})]),e("div",H,[M,l(i,{id:"tel",name:"電話",type:"text",class:m(["form-control col",{"is-invalid":o.電話}]),rules:V.isPhone,modelValue:t.order.user.tel,"onUpdate:modelValue":s[3]||(s[3]=r=>t.order.user.tel=r),placeholder:"請輸入電話",style:{"margin-right":"12px"}},null,8,["class","rules","modelValue"]),l(d,{name:"電話",class:"invalid-feedback"})]),e("div",J,[K,l(i,{id:"address",name:"地址",type:"text",class:m(["form-control col",{"is-invalid":o.地址}]),modelValue:t.order.user.address,"onUpdate:modelValue":s[4]||(s[4]=r=>t.order.user.address=r),style:{"margin-right":"12px"},placeholder:"請輸入地址",rules:"required"},null,8,["class","modelValue"]),l(d,{name:"地址",class:"invalid-feedback"})]),e("div",Q,[W,B(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":s[5]||(s[5]=r=>t.order.message=r)},null,512),[[F,t.order.message]])]),e("div",X,[e("div",Y,[l(f,{to:"/cart",class:"btn btn-outline-primary me-2"},{default:h(()=>[x("上一步")]),_:1}),l(f,{to:"/order",type:"submit",class:"btn btn-primary",onClick:t.createOrder},{default:h(()=>[x("下一步 | 確認訂單")]),_:1},8,["onClick"])])])]),_:1},8,["onSubmit"]),Z,e("div",ee,[e("table",te,[e("tbody",null,[t.cart.carts?(u(!0),b(v,{key:0},E(t.cart.carts,o=>(u(),b("tr",{key:o.id},[e("td",null,[e("div",se,[e("img",{src:o.product.imageUrl,class:"table-image me-3",alt:o.product.title,style:{height:"80px","object-fit":"cover",width:"120px"}},null,8,oe),e("span",le,c(o.qty),1)])]),e("td",null,c(o.product.title),1),e("td",ae,c(o.final_total),1)]))),128)):U("",!0)]),e("tfoot",null,[e("tr",null,[re,e("td",ne,c(t.cart.final_total),1)])])])])])])],64)}const fe=S(q,[["render",ie],["__scopeId","data-v-a23c4b7e"]]);export{fe as default};
