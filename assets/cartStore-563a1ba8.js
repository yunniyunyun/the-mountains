import{d as c,a as o}from"./pinia-e6b04fcb.js";import{S as n}from"./sweetalert2.all-fda0963d.js";import{l as h}from"./loadingStore-abd78020.js";import{r as p}from"./index-fcea784f.js";const{VITE_APP_URL:e,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/the-mountains/",MODE:"production",DEV:!1,PROD:!0},{loadingTrue:i,loadingFalse:s}=h(),m=c("cartStore",{state:()=>({cart:[]}),actions:{addToCart(t,a=1){i();const d={product_id:t,qty:a};o.post(`${e}/api/${r}/cart`,{data:d}).then(l=>{this.getCarts(),n.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"加入購物車"}),s()})},toCartPage(t,a=1){i();const d={product_id:t,qty:a};o.post(`${e}/api/${r}/cart`,{data:d}).then(()=>{this.getCarts(),p.push({path:"/cart"}),s()})},getCarts(){i(),o.get(`${e}/api/${r}/cart`).then(t=>{this.isLoading=!1,this.cart=t.data.data,s()})},updateCart(t){i();const a={product_id:t.product_id,qty:t.qty};this.loadingItem=t.id,o.put(`${e}/api/${r}/cart/${t.id}`,{data:a}).then(d=>{this.getCarts(),this.loadingItem="",n.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"購物車已更新"}),s()})},deleteCart(t){i(),this.loadingItem=t.id,o.delete(`${e}/api/${r}/cart/${t.id}`).then(a=>{this.getCarts(),this.loadingItem="",n.fire({background:"#b47978",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"已刪除"}),s()})},deleteCarts(){i(),o.delete(`${e}/api/${r}/carts`).then(t=>{this.getCarts(),this.loadingItem="",s()})}}});export{m as c};
