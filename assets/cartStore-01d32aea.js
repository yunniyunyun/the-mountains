import{i as c,j as o}from"./index-00515f93.js";import{S as d}from"./sweetalert2.all-6e9d9825.js";import{l}from"./loadingStore-44f701ee.js";const{VITE_APP_URL:a,VITE_APP_PATH:e}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/the-mountains/",MODE:"production",DEV:!1,PROD:!0},{loadingTrue:i,loadingFalse:r}=l(),u=c("cartStore",{state:()=>({cart:[]}),actions:{addToCart(t,s=1){i();const n={product_id:t,qty:s};o.post(`${a}/api/${e}/cart`,{data:n}).then(h=>{this.getCarts(),d.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"加入購物車"}),r()})},getCarts(){i(),o.get(`${a}/api/${e}/cart`).then(t=>{this.isLoading=!1,this.cart=t.data.data,r()})},updateCart(t){i();const s={product_id:t.product_id,qty:t.qty};this.loadingItem=t.id,o.put(`${a}/api/${e}/cart/${t.id}`,{data:s}).then(n=>{this.getCarts(),this.loadingItem="",d.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"購物車已更新"}),r()})},deleteCart(t){i(),this.loadingItem=t.id,o.delete(`${a}/api/${e}/cart/${t.id}`).then(s=>{this.getCarts(),this.loadingItem="",d.fire({background:"#b47978",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"已刪除"}),r()})},deleteCarts(){i(),o.delete(`${a}/api/${e}/carts`).then(t=>{this.getCarts(),this.loadingItem="",r()})}}});export{u as c};
