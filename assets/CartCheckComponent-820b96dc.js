import{c as h}from"./cartStore-17d0af91.js";import{l as k}from"./loadingStore-abd78020.js";import{o as _}from"./orderStore-20aa42ac.js";import{m as p,b as f}from"./pinia-e6b04fcb.js";import{l as C,n as S}from"./runtime-dom.esm-bundler-ff2db17e.js";import{b7 as U,aw as n,ak as u,m as b,u as a,n as e,b2 as g,F as y,au as E,l as F,aK as c,a4 as m,b4 as L,t as N,ao as B,al as q}from"./_plugin-vue_export-helper-21b08155.js";import"./sweetalert2.all-fda0963d.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-2c0267d0.js";import"./vue-router-d7550456.js";const I=h(),O={data(){return{}},computed:{...p(h,["cart"]),...p(k,["isLoading"]),...p(_,["order"])},methods:{...f(h,["getCarts"]),...f(_,["createOrder"]),isPhone(t){return t?/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼":"電話 為必填"}},mounted(){I.getCarts()}},r=t=>(B("data-v-704504ef"),t=t(),q(),t),$=r(()=>e("div",{class:"header"},null,-1)),j={class:"container mb-5"},A=r(()=>e("div",{class:"d-none d-md-flex justify-content-center text-secondary",style:{"margin-top":"60px"}},[e("div",{class:"position-relative m-4",style:{width:"60%"}},[e("div",{class:"progress",style:{height:"4px"}},[e("div",{class:"progress-bar",role:"progressbar",style:{width:"66%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),e("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc((33% - 5rem)/2)",color:"#1FBA82"}},"確認內容"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem",left:"33%"}},"2"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(32% + (33% - 5rem)/2)",color:"#1FBA82"}},"填寫資料"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"66%"}},"3"),e("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(65% + (33% - 5rem)/2)"}},"訂單完成"),e("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%"}})])],-1)),z=r(()=>e("h2",{class:"mt-5 text-light text-center mb-4"},"訂單資料",-1)),D={class:"row text-light"},M=r(()=>e("div",{class:"col-1"},null,-1)),P={class:"mb-3 row"},R=r(()=>e("label",{for:"email",class:"form-label col-3"},"Email",-1)),T={class:"mb-3 row"},K=r(()=>e("label",{for:"name",class:"form-label col-3"},"收件人姓名",-1)),G={class:"mb-3 row"},H=r(()=>e("label",{for:"tel",class:"form-label col-3"},"收件人電話",-1)),J={class:"mb-3 row"},Q=r(()=>e("label",{for:"address",class:"form-label col-3"},"收件人地址",-1)),W={class:"mb-3"},X=r(()=>e("label",{for:"message",class:"form-label"},"留言",-1)),Y={class:"text-end"},Z={class:"d-flex justify-content-end mt-4"},ee=r(()=>e("div",{class:"col-1"},null,-1)),te={class:"d-none d-md-block col-4"},se={class:"table align-middle text-light sticky-top",style:{top:"80px","z-index":"-5"}},oe={class:"position-relative",style:{height:"80px",width:"120px"}},le=["src","alt"],ae={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary"},re={class:"text-end"},ne=r(()=>e("td",{colspan:"2",class:"text-end text-success"},"結帳金額",-1)),ie={class:"text-end text-success"};function de(t,s,ce,me,pe,v){const x=n("loadingVue"),i=n("v-field"),d=n("error-message"),V=n("RouterLink"),w=n("VForm");return u(),b(y,null,[a(x,{active:t.isLoading,"onUpdate:active":s[0]||(s[0]=o=>t.isLoading=o)},null,8,["active"]),$,e("div",j,[A,z,e("div",D,[M,a(w,{ref:"form",class:"col-md-5",onSubmit:t.createOrder},{default:g(({errors:o})=>[e("div",P,[R,a(i,{id:"email",name:"Email",type:"email",class:m(["form-control col",{"is-invalid":o.Email}]),rules:"email|required",modelValue:t.order.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>t.order.user.email=l),placeholder:"請輸入 Email",style:{"margin-right":"12px"}},null,8,["modelValue","class"]),a(d,{name:"Email",class:"invalid-feedback"})]),e("div",T,[K,a(i,{id:"name",name:"姓名",type:"text",class:m(["form-control col",{"is-invalid":o.姓名}]),modelValue:t.order.user.name,"onUpdate:modelValue":s[2]||(s[2]=l=>t.order.user.name=l),placeholder:"請輸入姓名",rules:"required",style:{"margin-right":"12px"}},null,8,["class","modelValue"]),a(d,{name:"姓名",class:"invalid-feedback"})]),e("div",G,[H,a(i,{id:"tel",name:"電話",type:"text",class:m(["form-control col",{"is-invalid":o.電話}]),rules:v.isPhone,modelValue:t.order.user.tel,"onUpdate:modelValue":s[3]||(s[3]=l=>t.order.user.tel=l),placeholder:"請輸入電話",style:{"margin-right":"12px"}},null,8,["class","rules","modelValue"]),a(d,{name:"電話",class:"invalid-feedback"})]),e("div",J,[Q,a(i,{id:"address",name:"地址",type:"text",class:m(["form-control col",{"is-invalid":o.地址}]),modelValue:t.order.user.address,"onUpdate:modelValue":s[4]||(s[4]=l=>t.order.user.address=l),style:{"margin-right":"12px"},placeholder:"請輸入地址",rules:"required"},null,8,["class","modelValue"]),a(d,{name:"地址",class:"invalid-feedback"})]),e("div",W,[X,L(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":s[5]||(s[5]=l=>t.order.message=l)},null,512),[[C,t.order.message]])]),e("div",Y,[e("div",Z,[a(V,{to:"/cart",class:"btn btn-outline-primary me-2"},{default:g(()=>[N("上一步")]),_:1}),e("a",{href:"#",type:"submit",class:"btn btn-primary",onClick:s[6]||(s[6]=S((...l)=>t.createOrder&&t.createOrder(...l),["prevent"]))},"下一步 | 確認訂單")])])]),_:1},8,["onSubmit"]),ee,e("div",te,[e("table",se,[e("tbody",null,[t.cart.carts?(u(!0),b(y,{key:0},E(t.cart.carts,o=>(u(),b("tr",{key:o.id},[e("td",null,[e("div",oe,[e("img",{src:o.product.imageUrl,class:"table-image me-3",alt:o.product.title,style:{height:"80px","object-fit":"cover",width:"120px"}},null,8,le),e("span",ae,c(o.qty),1)])]),e("td",null,c(o.product.title),1),e("td",re,c(o.final_total),1)]))),128)):F("",!0)]),e("tfoot",null,[e("tr",null,[ne,e("td",ie,c(t.cart.final_total),1)])])])])])])],64)}const we=U(O,[["render",de],["__scopeId","data-v-704504ef"]]);export{we as default};
