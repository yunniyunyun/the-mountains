import{c as m}from"./cartStore-17d0af91.js";import{l as k}from"./loadingStore-abd78020.js";import{m as g,b as x}from"./pinia-e6b04fcb.js";import{k as C}from"./runtime-dom.esm-bundler-ff2db17e.js";import{b7 as w,aw as f,ak as l,m as n,u,n as t,F as r,au as p,l as _,aK as d,b2 as h,k as S,t as c,b4 as V,ao as I,al as q}from"./_plugin-vue_export-helper-21b08155.js";import"./sweetalert2.all-fda0963d.js";import"./_commonjsHelpers-042e6b4d.js";const L=m(),B={data(){return{products:[],loadingItem:""}},computed:{...g(m,["cart"]),...g(k,["isLoading"])},methods:{...x(m,["deleteCart","updateCart","getCarts"])},mounted(){L.getCarts()}},a=s=>(I("data-v-b10acdbc"),s=s(),q(),s),$=a(()=>t("div",{class:"header"},null,-1)),N={class:"container mb-5"},U=a(()=>t("div",{class:"d-none d-md-flex justify-content-center text-secondary",style:{"margin-top":"60px"}},[t("div",{class:"position-relative m-4",style:{width:"60%"}},[t("div",{class:"progress",style:{height:"4px"}},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"33%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc((33% - 5rem)/2)",color:"#1FBA82"}},"確認內容"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"33%"}},"2"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(32% + (33% - 5rem)/2)"}},"填寫資料"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"66%"}},"3"),t("h5",{class:"position-absolute",style:{top:"-26px",left:"calc(65% + (33% - 5rem)/2)"}},"訂單完成"),t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%"}})])],-1)),F=a(()=>t("h2",{class:"mt-5 text-light text-center mb-3"},"購物車內容",-1)),j=a(()=>t("div",{class:"text-end"},null,-1)),A={class:"table align-middle text-light"},D=a(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",null,"單價"),t("th",{style:{width:"150px"}},"數量"),t("th")])],-1)),R=["disabled","onClick"],E=a(()=>t("i",{class:"fas fa-spinner fa-pulse"},null,-1)),K=["src","alt"],M={class:"input-group input-group-sm"},T=["onUpdate:modelValue","disabled","onChange"],z=["value"],G=["value"],H={class:"text-end"},J=a(()=>t("small",{class:"text-success"},"小計：",-1)),O=a(()=>t("td",null,null,-1)),P=a(()=>t("td",{colspan:"3",class:"text-end"},"總計",-1)),Q={class:"text-end"},W=a(()=>t("td",null,null,-1)),X=a(()=>t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)),Y={class:"text-end text-success"},Z={class:"d-flex justify-content-end mt-4"};function tt(s,b,et,st,y,ot){const v=f("loadingVue"),i=f("RouterLink");return l(),n(r,null,[u(v,{active:s.isLoading,"onUpdate:active":b[0]||(b[0]=e=>s.isLoading=e)},null,8,["active"]),$,t("div",N,[U,F,j,t("table",A,[D,t("tbody",null,[s.cart.carts?(l(!0),n(r,{key:0},p(s.cart.carts,e=>(l(),n("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e.id===y.loadingItem,onClick:o=>s.deleteCart(e)},[E,c(" x ")],8,R)]),t("td",null,[u(i,{to:`/product/${e.product.id}`},{default:h(()=>[t("img",{src:e.product.imageUrl,class:"table-image me-3",alt:e.product.title},null,8,K)]),_:2},1032,["to"]),c(" "+d(e.product.title),1)]),t("td",null,d(e.product.price),1),t("td",null,[t("div",M,[V(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>e.qty=o,disabled:e.id===y.loadingItem,onChange:o=>s.updateCart(e)},[e.qty<=10?(l(),n(r,{key:0},p(10,o=>t("option",{value:o,key:`${o}qty`},d(o),9,z)),64)):(l(!0),n(r,{key:1},p(e.qty,o=>(l(),n("option",{value:o,key:o+"qty"},d(o),9,G))),128))],40,T),[[C,e.qty]])])]),t("td",H,[J,c(" "+d(e.final_total),1)])]))),128)):_("",!0)]),t("tfoot",null,[t("tr",null,[O,P,t("td",Q,d(s.cart.total),1)]),t("tr",null,[W,X,t("td",Y,d(s.cart.final_total),1)])])]),t("div",Z,[u(i,{to:"/products",class:"btn btn-outline-primary me-2"},{default:h(()=>[c("繼續購物")]),_:1}),s.cart.length!==0?(l(),n(r,{key:0},[s.cart.carts.length!==0?(l(),S(i,{key:0,to:"/checkout",class:"btn btn-primary"},{default:h(()=>[c("下一步 | 填寫資料")]),_:1})):_("",!0)],64)):_("",!0)])])],64)}const ut=w(B,[["render",tt],["__scopeId","data-v-b10acdbc"]]);export{ut as default};
