import{g as c,h as d}from"./index-797c25d8.js";import{S as i}from"./sweetalert2.all-88f88594.js";const{VITE_APP_URL:p,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"winter_",BASE_URL:"/vue-hw-7/",MODE:"production",DEV:!1,PROD:!0},h=c("productsStore",{state:()=>({products:[],pages:{}}),actions:{getProducts(r=1){d.get(`${p}/api/${u}/products/?page=${r}`).then(t=>{this.products=t.data.products,this.pages=t.data.pagination}).catch(t=>{i.fire({icon:"error",title:t.response.data.message})})}},getters:{sortProducts:({products:r})=>r.sort((t,s)=>t.price-s.price)}}),g=c("cart",{state:()=>({cart:[]}),actions:{addToCart(r,t=1){const s=this.cart.find(o=>o.productId===r);s?s.qty+=t:this.cart.push({id:new Date().getTime(),productId:r,qty:t}),i.fire({background:"#0A603C",color:"#FFFFFF",width:350,position:"top-end",showConfirmButton:!1,timer:1e3,title:"加入購物車"})},setCartQty(r,t){const s=this.cart.find(o=>o.id===r);s.qty=t*1},removeCartItem(r){const t=this.cart.findIndex(s=>s.id===r);this.cart.splice(t,1)}},getters:{cartList:({cart:r})=>{const{products:t}=h(),s=r.map(e=>{const a=t.find(n=>n.id===e.productId);return{...e,product:a,subtotal:a.price*e.qty}}),o=s.reduce((e,a)=>e+a.subtotal,0);return{carts:s,total:o}}}});export{g as c,h as p};
